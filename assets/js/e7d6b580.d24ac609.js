"use strict";(self.webpackChunkymmobilier=self.webpackChunkymmobilier||[]).push([[878],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return m}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(r),m=a,f=d["".concat(l,".").concat(m)]||d[m]||c[m]||o;return r?n.createElement(f,i(i({ref:t},p),{},{components:r})):n.createElement(f,i({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},385:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return c}});var n=r(7462),a=r(3366),o=(r(7294),r(3905)),i=["components"],s={sidebar_position:4},l="L'architecture MVC",u={unversionedId:"organisation/mvc",id:"organisation/mvc",title:"L'architecture MVC",description:"Laravel est un framework PHP qui utilise l'architecture MVC.",source:"@site/docs/organisation/mvc.md",sourceDirName:"organisation",slug:"/organisation/mvc",permalink:"/Doc-Ymmobilier/docs/organisation/mvc",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/organisation/mvc.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Les Routes API",permalink:"/Doc-Ymmobilier/docs/organisation/routes"},next:{title:"L'Installation du Projet",permalink:"/Doc-Ymmobilier/docs/category/linstallation-du-projet"}},p={},c=[{value:"Les Mod\xe8les",id:"les-mod\xe8les",level:2},{value:"Les Contr\xf4leurs",id:"les-controleurs",level:2},{value:"Les Vues",id:"les-vues",level:2}],d={toc:c};function m(e){var t=e.components,r=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"larchitecture-mvc"},"L'architecture MVC"),(0,o.kt)("p",null,"Laravel est un framework PHP qui utilise l'architecture MVC. "),(0,o.kt)("p",null,"L'architecture MVC permet de d\xe9couper notre infrastructure en plusieurs parties :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/organisation/bdd#les-mod%C3%A8les"},"Les Mod\xe8les")," : qui contiennent les donn\xe9es"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#les-vues"},"Les Vues")," : qui permettent de visualiser les donn\xe9es"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#les-controleurs"},"Les Controllers")," : qui g\xe8rent les donn\xe9es")),(0,o.kt)("h2",{id:"les-mod\xe8les"},"Les Mod\xe8les"),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"La partie ",(0,o.kt)("strong",{parentName:"p"},"Mod\xe8le")," de cette documentation se trouve ",(0,o.kt)("a",{parentName:"p",href:"/docs/organisation/bdd#les-mod%C3%A8les"},"ici"),"."))),(0,o.kt)("h2",{id:"les-controleurs"},"Les Contr\xf4leurs"),(0,o.kt)("p",null,"Un contr\xf4leur va traiter les actions de l'utilisateur, demander au(x) mod\xe8le(s) d'effectuer des changements puis de renvoyer une vue ou une r\xe9ponse (pour l'api). C'est donc le pont entre les interactions de l'utilisateur et le traitement des donn\xe9es dans les diff\xe9rents mod\xe8les."),(0,o.kt)("p",null,"Toutes les fonctions pr\xe9sentent dans les contr\xf4leurs sont reli\xe9es \xe0 une route."),(0,o.kt)("p",null,"Le projet comporte plusieurs contr\xf4leurs :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"PropertyController")," : g\xe8re les actions des propri\xe9t\xe9s"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"ReservationController")," : g\xe8re les actions des r\xe9servations"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FavoriteController")," : g\xe8re les actions des favoris"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"DashboardController")," : g\xe8re les principales et affichage pour le panneau d'administration")),(0,o.kt)("p",null,"Exemple de la fonction findOne() du fichier PropertyController qui permet de renvoyer au format JSON une propri\xe9t\xe9 et toutes les donn\xe9es li\xe9s \xe0 celle-ci:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"function findOne($id)\n{\n    $user_id = Auth::id();\n    $property = Property::where('id', $id)\n        ->with('localisation')\n        ->with('type')\n        ->with('features.category_features')\n        ->with('images')\n        ->first();\n\n    if($property) {\n        if(Auth::check()) {\n            $property->is_favorite = (bool)Favorite::where('property_id', $property->id)->where('user_id', $user_id)->first();\n        }else{\n            $property->is_favorite = false;\n        }\n        return response()->json($property, 200);\n    } else {\n        return response()->json(\"Property not found\", 404);\n    }\n}\n")),(0,o.kt)("h2",{id:"les-vues"},"Les Vues"),(0,o.kt)("p",null,"Les vues sont les \xe9l\xe9ments visuels qui permettent de visualiser les donn\xe9es."),(0,o.kt)("p",null,"Afin d'optimiser le rendu des vues et le nombre de fichiers, Blade permet de cr\xe9er des composants et des layouts que l'on peut r\xe9utiliser dans les vues."),(0,o.kt)("p",null,"Ainsi le panneau d'administration est compos\xe9 de plusieurs vues :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"welcome")," : page d'accueil du panneau d'administration qui invite l'utilisateur \xe0 s'authentifier"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"dashboard.home")," : page d'accueil du panneau d'administration"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"dashboard.users")," : page de gestion des utilisateurs"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"dashboard.properties")," : page de gestion des propri\xe9t\xe9s"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"dashboard.reservations")," : page de gestion des r\xe9servations")),(0,o.kt)("p",null,"Par exemple dans la vue dashboard.reservations, on vient r\xe9utiliser le layout ",(0,o.kt)("inlineCode",{parentName:"p"},"app")," pour d\xe9finir la structure de la page, puis on utilise des composants pour afficher les donn\xe9es. Ces composants seront affich\xe9s en fonction de la route qui a \xe9t\xe9 utilis\xe9e."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-blade.php"},'<x-app-layout>\n    <x-slot name="header">\n        <h2 class="font-semibold text-2xl text-gray-800 leading-tight text-center">\n            @switch(request()->route()->getName())\n                @case(\'admin.properties.reservations\')\n                {{ __(\'Choix de l\\\'annonce\') }}\n                @break\n                @case(\'admin.property.reservations\')\n                {{ __(\'R\xe9servation de \'. $property->title) }}\n                @break\n            @endswitch\n        </h2>\n    </x-slot>\n\n    <div class="flex flex-row mx-4 gap-4">\n        @switch(request()->route()->getName())\n            @case(\'admin.properties.reservations\')\n            <x-reservations.tables :datas="$properties" class="tableforfilter"/>\n            @break\n            @case(\'admin.property.reservations\')\n            <x-property.card :property="$property" class="filter"/>\n            <x-reservations.res-property :datas="$reservations" class="tableforfilter"/>\n            @break\n        @endswitch\n    </div>\n</x-app-layout>\n')))}m.isMDXComponent=!0}}]);