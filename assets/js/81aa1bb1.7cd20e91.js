"use strict";(self.webpackChunkymmobilier=self.webpackChunkymmobilier||[]).push([[18],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return u}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=d(t),u=r,f=m["".concat(l,".").concat(u)]||m[u]||p[u]||s;return t?a.createElement(f,i(i({ref:n},c),{},{components:t})):a.createElement(f,i({ref:n},c))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,i=new Array(s);i[0]=m;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var d=2;d<s;d++)i[d]=t[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},9312:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return o},metadata:function(){return d},toc:function(){return p}});var a=t(7462),r=t(3366),s=(t(7294),t(3905)),i=["components"],o={sidebar_position:2},l="La Base de Donn\xe9es",d={unversionedId:"organisation/bdd",id:"organisation/bdd",title:"La Base de Donn\xe9es",description:"MySQL",source:"@site/docs/organisation/bdd.md",sourceDirName:"organisation",slug:"/organisation/bdd",permalink:"/Doc-Ymmobilier/docs/organisation/bdd",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/organisation/bdd.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Choix des technologies",permalink:"/Doc-Ymmobilier/docs/organisation/technos_choices"},next:{title:"Les Routes API",permalink:"/Doc-Ymmobilier/docs/organisation/routes"}},c={},p=[{value:"MySQL",id:"mysql",level:2},{value:"Diagramme de classes",id:"diagramme-de-classes",level:2},{value:"Les Mod\xe8les",id:"les-mod\xe8les",level:2},{value:"Les Seeders et les Factories",id:"les-seeders-et-les-factories",level:2}],m={toc:p};function u(e){var n=e.components,o=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,a.Z)({},m,o,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"la-base-de-donn\xe9es"},"La Base de Donn\xe9es"),(0,s.kt)("h2",{id:"mysql"},"MySQL"),(0,s.kt)("p",null,"Laravel est compos\xe9 d'un ORM (Object Relational Mapper) qui permet de faire le lien entre les donn\xe9es et les objets de l'application tr\xe8s facilement.\nCet ORM est optimis\xe9 pour les bases de donn\xe9es relationnelles comme MySQL."),(0,s.kt)("p",null,"Afin d'organiser les donn\xe9es et de faciliter leur manipulation, Laravel utilise une architecture de donn\xe9es nomm\xe9e ",(0,s.kt)("strong",{parentName:"p"},"Mod\xe8le"),".\nChaque mod\xe8le repr\xe9sente une table de la base de donn\xe9es. "),(0,s.kt)("p",null,"Un diagramme de classes a \xe9t\xe9 mise en place d\xe8s le lancement du projet, en fonction du cahier des charges et des fonctionnalit\xe9s de l'application souhait\xe9es."),(0,s.kt)("h2",{id:"diagramme-de-classes"},"Diagramme de classes"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Diagramme de classes",src:t(3564).Z,width:"3906",height:"1477"})),(0,s.kt)("h2",{id:"les-mod\xe8les"},"Les Mod\xe8les"),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Un ",(0,s.kt)("strong",{parentName:"p"},"mod\xe8le")," contient une classe qui va repr\xe9senter une table en base de donn\xe9es. Cette classe vient faire \xab l'interface \xbb entre le contr\xf4leur et la base de donn\xe9es."))),(0,s.kt)("p",null,"Suite \xe0 la sch\xe9matisation de la base de donn\xe9es avec un diagramme de classe, il est facile d'organiser et de cr\xe9er les mod\xe8les."),(0,s.kt)("p",null,"Afin de r\xe9aliser les liaisons entre les diff\xe9rentes tables, Laravel propose d'utiliser les relations entre les mod\xe8les."),(0,s.kt)("p",null,"Ainsi, notre projet comporte plusieurs types de relations :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://laravel.com/docs/9.x/eloquent-relationships#one-to-one"},"One to one")," : une relation \xab one to one \xbb permet d'\xe9tablir la cardinalit\xe9 de 1 \xe0 1 entre les mod\xe8les."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://laravel.com/docs/9.x/eloquent-relationships#one-to-many"},"One to many")," : une relation \xab one to many \xbb permet d'\xe9tablir la cardinalit\xe9 de 1 \xe0 n entre les mod\xe8les."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://laravel.com/docs/9.x/eloquent-relationships#many-to-many"},"Many to many")," : une relation \xab many to many \xbb permet d'\xe9tablir la cardinalit\xe9 de n \xe0 n entre les mod\xe8les.")),(0,s.kt)("p",null,"Prenons par exemple notre mod\xe8le principal ",(0,s.kt)("inlineCode",{parentName:"p"},"Property")," :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-php"},"class Property extends Model {\n    use HasFactory;\n    private $is_favorite = false;\n\n    public function type(){ return $this->belongsTo(Type::class); }\n\n    public function localisation(){ return $this->hasOne(Localisation::class); }\n\n    public function images(){ return $this->hasMany(Image::class); }\n\n    public function features(){ return $this->belongsToMany(Feature::class); }\n\n    public function favorites(){ return $this->hasMany(Favorite::class); }\n\n    public function reservations(){ return $this->hasMany(Reservation::class); }\n}\n")),(0,s.kt)("h2",{id:"les-seeders-et-les-factories"},"Les Seeders et les Factories"),(0,s.kt)("p",null,"Pour pr\xe9senter une application et un panneau d'administration fonctionnels, notre projet comporte des donn\xe9es de test."),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Les donn\xe9es de test sont g\xe9n\xe9r\xe9es automatiquement et al\xe9atoirement par Laravel. Aucunes des donn\xe9es pr\xe9sentes ne sont r\xe9els."))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Les Factories")," utilisent la librairie de g\xe9n\xe9ration de donn\xe9es ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/fzaninotto/Faker"},"Faker"),". Ainsi des param\xe8tres et des directives sont donn\xe9es par exemple, dans le fichier UserFactory.php afin de cr\xe9er de faux utilisateurs :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-php"},"class UserFactory extends Factory\n{\n    public function definition()\n    {\n        return [\n            'name' => $this->faker->name(),\n            'phone' => \"0\" . $this->faker->numberBetween(100000000, 999999999),\n            'image' => 'https://picsum.photos/id/'.$this->faker->numberBetween(1,1000).'/200/300',\n            'email' => $this->faker->unique()->safeEmail(),\n            'email_verified_at' => now(),\n            'password' => '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', // password\n            'remember_token' => Str::random(10),\n            'created_at' => now(),\n        ];\n    }\n}    \n")),(0,s.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"La ",(0,s.kt)("strong",{parentName:"p"},"plupart des donn\xe9es")," sont g\xe9n\xe9r\xe9s par le fichier ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/DimitriRomano/YnovB3-Immo-API-Panel/blob/master/database/seeders/PropertySeeder.php"},"PropertySeeder.php"),". On y retrouve tout l'algorithme de g\xe9n\xe9ration de donn\xe9es ainsi que la r\xe9flexion qu'il y a pu avoir pour arriver \xe0 utiliser les relations entre les mod\xe8les avec les seeders."))))}u.isMDXComponent=!0},3564:function(e,n,t){n.Z=t.p+"assets/images/diagramme-classes-3012bf6343f9cddad177804ce2eae4f8.png"}}]);